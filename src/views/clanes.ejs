<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/gatitos.css">
    <title>Clanes</title>
</head>

<body>
    <%- include('partials/header') %>

        <main>
            <table class="tabla">
                <thead>
                    <tr>
                        <th colspan="<%= usuario?.rol === 'admin' ? 4 : 3 %>">Clanes</th>
                    </tr>
                    <tr>
                        <th>Nombre del Clan</th>
                        <th>Territorios</th>
                        <% if (usuario?.rol==='admin' ) { %>
                            <th>Acciones</th>
                            <% } %>
                    </tr>
                </thead>
                <tbody>
                    <% clanes.forEach(clan=> { %>
                        <tr>
                            <td>
                                <%= clan.nombre %>
                            </td>
                            <td>
                                <%= clan.territorios || 'Sin territorios' %>
                            </td>
                            <% if (usuario?.rol==='admin' ) { %>
                                <td>
                                    <form method="POST" action="/clanes/eliminar/<%= clan.id_clan %>"
                                        onsubmit="return confirm('Â¿Eliminar este clan?');">
                                        <button type="submit">Eliminar</button>
                                    </form>
                                </td>
                                <% } %>
                        </tr>
                        <% }) %>
                </tbody>
            </table>

            <% if (usuario?.rol==='admin' ) { %>
                <section style="margin-top: 2em;">
                    <h2>Agregar nuevo clan</h2>
                    <form method="POST" action="/clanes" style="display: flex; gap: 1em; align-items: center;">
                        <input type="text" name="nombre" placeholder="Nombre del clan" required />
                        <button type="submit">Agregar Clan</button>
                    </form>
                </section>
                <% } %>
        </main>

        <%- include('partials/footer') %>
</body>

</html>